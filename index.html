<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Wi-Fi Connect</title>
<link rel="manifest" href="manifest.json">

<!-- iOS PWA -->
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="apple-touch-icon" href="icons/icon_r2d5.svg" />

<!-- QR generator -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<style>
:root{
  --accent:#8f6bff;
  --bg:#050015;
  --card-bg:rgba(10,0,40,0.9);
  --text:#f9f4ff;
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f3f4ff;
    --card-bg:rgba(255,255,255,0.95);
    --text:#1a1a1a;
  }
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  min-height:100vh;
  background:radial-gradient(circle at top,#23124b,var(--bg));
  color:var(--text);
  overflow-x:hidden;
}

body.neon{
  background:radial-gradient(circle at top,#23124b,#050015);
  color:#f9f4ff;
}

.container{
  max-width:520px;
  margin:40px auto 40px;
  padding:0 14px;
}

.card{
  background:var(--card-bg);
  border-radius:28px;
  padding:20px 18px 28px;
  box-shadow:0 24px 60px rgba(0,0,0,0.7);
}

h1{
  text-align:center;
  margin-bottom:22px;
  font-size:24px;
}

.theme-toggle{
  position:fixed;
  top:12px;
  right:12px;
  width:42px;
  height:42px;
  border-radius:50%;
  background:rgba(20,10,60,0.9);
  color:#ffd86b;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  font-size:20px;
  z-index:10;
  box-shadow:0 0 16px rgba(0,0,0,0.6);
}

/* =========================
      NETWORK SELECTOR
========================= */

.network-wrapper{
  position:relative;
  overflow:hidden;
  margin-bottom:18px;
}

.network-track{
  display:flex;
  transition:transform .25s ease-out;
  will-change:transform;
}

.net-card{
  flex:0 0 100%;
  padding:14px 8px 20px;
  border-radius:22px;
  margin-right:12px;
  background:rgba(12,4,40,0.95);
  border:2px solid rgba(140,120,255,0.25);
  text-align:center;
  cursor:pointer;
  transition:.16s ease;
}

body:not(.neon) .net-card{
  background:rgba(255,255,255,0.92);
}

.net-card img{
  width:70%;
  max-width:150px;
  margin-bottom:6px;
}

.net-card label{
  display:block;
  font-size:18px;
}

.net-card small{
  display:block;
  font-size:13px;
  opacity:.82;
  margin-top:2px;
}

.net-card.active{
  border-color:var(--accent);
  box-shadow:0 0 22px rgba(145,120,255,0.9);
  background:radial-gradient(circle at top,rgba(150,120,255,0.25),rgba(18,6,50,0.98));
}

body:not(.neon) .net-card.active{
  background:radial-gradient(circle at top,rgba(150,120,255,0.16),#ffffff);
}

/* DOTS */
.network-dots{text-align:center;margin-bottom:20px;}
.network-dots .dot{
  display:inline-block;
  width:7px;
  height:7px;
  border-radius:50%;
  background:rgba(255,255,255,0.28);
  margin:0 4px;
}
.network-dots .dot.active{background:var(--accent);}

/* PC-only arrows */
.arrow{
  position:absolute;
  top:40%;
  width:42px;
  height:42px;
  background:rgba(0,0,0,0.4);
  border-radius:50%;
  color:#fff;
  display:none;
  justify-content:center;
  align-items:center;
  font-size:22px;
  cursor:pointer;
  user-select:none;
  backdrop-filter:blur(6px);
}
.arrow.left{left:0;}
.arrow.right{right:0;}

@media (min-width:720px){
  .arrow{display:flex;}
}

/* Buttons */
button{
  width:100%;
  margin-top:12px;
  padding:13px 12px;
  border-radius:18px;
  border:none;
  background:linear-gradient(135deg,#8f6bff,#b073ff);
  color:white;
  font-size:16px;
  cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,0.6);
  transition:.12s;
}
button:hover{
  transform:translateY(-1px);
  box-shadow:0 16px 30px rgba(0,0,0,0.65);
}

/* QR block */
.qr{
  display:none;
  margin-top:16px;
  text-align:center;
}
.qr canvas{
  background:white;
  padding:6px;
  border-radius:18px;
}

.helper{
  margin-top:10px;
  font-size:13px;
  opacity:.84;
  text-align:center;
}
</style>
</head>

<body>
<div class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è</div>

<div class="container">
  <h1>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wi-Fi</h1>

  <div class="card">

    <!-- ARROWS (PC only) -->
    <div class="arrow left" onclick="selectIndex(selectedIndex - 1)">‚óÄ</div>
    <div class="arrow right" onclick="selectIndex(selectedIndex + 1)">‚ñ∂</div>

    <div class="network-wrapper" id="nwWrap">
      <div class="network-track" id="nwTrack">

        <!-- r2d5 -->
        <div class="net-card" data-net="r2d5">
          <img src="icons/icon_r2d5.svg" alt="r2d5 5GHz">
          <label>r2d5</label>
          <small>5 GHz ¬∑ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ –Ω–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</small>
        </div>

        <!-- r2d2 -->
        <div class="net-card" data-net="r2d2">
          <img src="icons/icon_r2d2.svg" alt="r2d2 2.4GHz">
          <label>r2d2</label>
          <small>2.4 GHz ¬∑ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏</small>
        </div>

      </div>
    </div>

    <div class="network-dots">
      <span class="dot active"></span>
      <span class="dot"></span>
    </div>

    <button onclick="autoConnect()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (Android)</button>
    <button onclick="showQR()">–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥</button>
    <button onclick="copyPass()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>

    <div class="qr" id="qrBox">
      <canvas id="qrCanvas" width="200" height="200"></canvas>
    </div>

    <div class="helper" id="helperText"></div>

  </div>
</div>


<script>
const PASSWORD = "Jgthfnbdysq1913";
const networks = ["r2d5","r2d2"];
let selectedIndex = 0;

const track = document.getElementById("nwTrack");
const wrap = document.getElementById("nwWrap");

/* ==========================
       CORE SELECT FUNCTION
========================== */
function applySelection(){
  const width = wrap.clientWidth;
  track.style.transform = "translateX(" + (-selectedIndex * width) + "px)";

  document.querySelectorAll(".net-card").forEach((c, i)=>{
    c.classList.toggle("active", i === selectedIndex);
  });

  document.querySelectorAll(".dot").forEach((d, i)=>{
    d.classList.toggle("active", i === selectedIndex);
  });

  document.getElementById("qrBox").style.display = "none";

  const net = networks[selectedIndex];
  document.getElementById("helperText").textContent =
    net === "r2d5"
      ? "–í—ã–±—Ä–∞–Ω–∞ r2d5 (5 GHz) ‚Äî –±—ã—Å—Ç—Ä–µ–µ, –µ—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç."
      : "–í—ã–±—Ä–∞–Ω–∞ r2d2 (2.4 GHz) ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –∏ —Å—Ç–∞—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.";
}

function selectIndex(i){
  if(i < 0 || i >= networks.length) return;
  selectedIndex = i;
  applySelection();
}

/* ==========================
         SWIPE (mobile)
========================== */
let startX = null;
wrap.addEventListener("touchstart", e=>{
  startX = e.touches[0].clientX;
}, {passive:true});

wrap.addEventListener("touchend", e=>{
  if(startX === null) return;
  const dx = e.changedTouches[0].clientX - startX;

  if(Math.abs(dx) > 40){
    if(dx < 0) selectIndex(selectedIndex + 1);
    else selectIndex(selectedIndex - 1);
  }
  startX = null;
});

/* ==========================
        CLICK (PC & Mobile)
========================== */
document.querySelectorAll(".net-card").forEach((card, idx)=>{
  card.addEventListener("click", ()=>selectIndex(idx));
});

/* ==========================
       WHEEL (PC)
========================== */
wrap.addEventListener("wheel", e=>{
  if(e.deltaY > 0) selectIndex(selectedIndex + 1);
  else selectIndex(selectedIndex - 1);
});

/* ==========================
       AUTO-THEME
========================== */
function updateThemeIcon(){
  document.querySelector(".theme-toggle").textContent =
    document.body.classList.contains("neon") ? "üåô" : "‚òÄÔ∏è";
}

function toggleTheme(){
  document.body.classList.toggle("neon");
  localStorage.theme = document.body.classList.contains("neon") ? "dark" : "system";
  updateThemeIcon();
}

(function initTheme(){
  const stored = localStorage.theme;
  const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;

  if(stored === "dark"){
    document.body.classList.add("neon");
  } else if(stored === "system"){
    if(prefersDark) document.body.classList.add("neon");
  } else {
    if(prefersDark) document.body.classList.add("neon");
  }
  updateThemeIcon();
})();

/* ==========================
     AUTOSELECT BEST NETWORK
========================== */
(function autoSelectBest(){
  const ua = navigator.userAgent;
  const oldAndroid = /Android\s([0-6]\.\d|7\.0)/i.test(ua);
  const oldIOS = /OS\s(9_|10_|11_)/i.test(ua);

  let prefer5 = !(oldAndroid || oldIOS);

  const conn = navigator.connection || navigator.webkitConnection || null;
  if(conn){
    if(conn.downlink < 10) prefer5 = false;
    if(conn.rtt < 30 && conn.downlink > 30) prefer5 = true;
  }

  selectIndex(prefer5 ? 0 : 1);
})();

/* ==========================
         QR GENERATION
========================== */
function showQR(){
  const net = networks[selectedIndex];
  const wifiString = `WIFI:T:WPA;S:${net};P:${PASSWORD};;`;

  const canvas = document.getElementById("qrCanvas");
  new QRious({
    element: canvas,
    value: wifiString,
    size: 200,
    level: "H",
    background: "white",
    foreground: "black"
  });

  document.getElementById("qrBox").style.display = "block";
}

/* ==========================
      ANDROID AUTOCONNECT
========================== */
function autoConnect(){
  const net = networks[selectedIndex];
  window.location.href = `WIFI:T:WPA;S:${net};P:${PASSWORD};;`;
}

/* ==========================
         COPY
========================== */
function copyPass(){
  navigator.clipboard.writeText(PASSWORD)
    .then(()=>alert("–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"));
}

/* ==========================
         INIT ON LOAD
========================== */
window.addEventListener("load", ()=>{
  applySelection();
  window.addEventListener("resize", ()=>applySelection());

  if("serviceWorker" in navigator){
    navigator.serviceWorker.register("sw.js");
  }
});
</script>

</body>
</html>
