<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wi-Fi Connect</title>
<link rel="manifest" href="manifest.json">

<style>
:root{
  --accent:#a982ff;
}

/* ======================
   BASE
====================== */
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  min-height:100vh;
  background:radial-gradient(circle at top,#221247,#050015);
  color:#f1e9ff;
  overflow-x:hidden;
}

.container{
  max-width:520px;
  margin:40px auto;
  padding:16px;
}

h1{
  text-align:center;
  margin-bottom:28px;
  font-size:26px;
  font-weight:600;
}

/* ======================
   THEME TOGGLE
====================== */
.theme-toggle{
  position:fixed;
  top:14px; right:14px;
  width:44px; height:44px;
  border-radius:50%;
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(6px);
  color:#ffe19f;
  display:flex; justify-content:center; align-items:center;
  cursor:pointer;
  font-size:22px;
  user-select:none;
  z-index:50;
  box-shadow:0 0 14px rgba(0,0,0,0.6);
}

/* ======================
   CARD
====================== */
.card{
  background:rgba(10,0,40,0.90);
  border-radius:28px;
  padding:24px;
  box-shadow:0 18px 60px rgba(0,0,0,0.65);
  position:relative;
}

/* ======================
   NETWORK SWIPER
====================== */
#nwWrap{
  width:100%;
  overflow:hidden;
  position:relative;
  border-radius:26px;
  margin-bottom:18px;
}

#nwTrack{
  display:flex;
  transition:transform .35s cubic-bezier(.3,.7,.25,1);
  width:200%;
}

.net-card{
  min-width:100%;
  text-align:center;
  padding:32px 16px;
  border-radius:24px;
  background:rgba(30,16,70,0.65);
  border:2px solid transparent;
  transition:all .25s ease;
}

.net-card.active{
  border-color:var(--accent);
  background:radial-gradient(circle at top,rgba(150,120,255,0.28),rgba(40,15,90,0.95));
  box-shadow:0 0 22px rgba(160,120,255,0.6);
}

.net-card img{
  width:160px;
  margin-bottom:12px;
  user-select:none;
  -webkit-user-drag:none;
}

.net-card label{
  font-size:20px;
}
.net-card small{
  font-size:14px;
  opacity:.85;
}

/* ======================
   DOTS
====================== */
.dots{
  text-align:center;
  margin-top:10px;
  margin-bottom:16px;
}
.dot{
  display:inline-block;
  width:8px; height:8px;
  margin:0 4px;
  background:#7d68b8;
  border-radius:50%;
  opacity:.45;
  transition:.2s;
}
.dot.active{
  opacity:1;
  background:#c8afff;
}

/* ======================
   ARROWS
====================== */
.arrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:44px; height:44px;
  background:rgba(255,255,255,0.10);
  backdrop-filter:blur(6px);
  border-radius:50%;
  display:flex; justify-content:center; align-items:center;
  cursor:pointer;
  user-select:none;
  font-size:22px;
  color:white;
  z-index:40;
  transition:background .2s;
}
.arrow:hover{ background:rgba(255,255,255,0.18); }

.arrow.left{ left:-22px; }
.arrow.right{ right:-22px; }

/* ======================
   BUTTONS
====================== */
button{
  width:100%;
  padding:14px;
  border-radius:18px;
  border:none;
  margin-top:14px;
  font-size:16px;
  cursor:pointer;
  background:linear-gradient(135deg,#956cff,#b27aff);
  color:white;
  box-shadow:0 10px 28px rgba(0,0,0,0.6);
  transition:.15s;
}
button:hover{
  transform:translateY(-1px);
  filter:brightness(1.05);
}

/* ======================
   QR
====================== */
#qrBox{
  margin-top:18px;
  display:none;
  text-align:center;
}
#qrCanvas{
  border-radius:18px;
  background:white;
  padding:6px;
}

.helper{
  margin-top:10px;
  font-size:13px;
  opacity:.85;
  text-align:center;
}
</style>
</head>
<body>

<div class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è</div>

<div class="container">
<h1>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wi-Fi</h1>

<div class="card">

  <div id="nwWrap">
    <div class="arrow left" onclick="selectIndex(selectedIndex-1)">‚óÄ</div>
    <div class="arrow right" onclick="selectIndex(selectedIndex+1)">‚ñ∂</div>

    <div id="nwTrack">
      <!-- r2d5 -->
      <div class="net-card" data-net="r2d5">
        <img src="icons/icon_r2d5.svg" alt="r2d5">
        <label>r2d5</label>
        <small>5 GHz ¬∑ –±—ã—Å—Ç—Ä–µ–µ, –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</small>
      </div>

      <!-- r2d2 -->
      <div class="net-card" data-net="r2d2">
        <img src="icons/icon_r2d2.svg" alt="r2d2">
        <label>r2d2</label>
        <small>2.4 GHz ¬∑ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏</small>
      </div>
    </div>
  </div>

  <div class="dots">
    <div class="dot"></div>
    <div class="dot"></div>
  </div>

  <button onclick="autoConnect()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (Android)</button>
  <button onclick="showQR()">–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥</button>
  <button onclick="copyPass()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>

  <div id="qrBox">
    <canvas id="qrCanvas" width="200" height="200"></canvas>
  </div>

  <div class="helper" id="helperText"></div>

</div>
</div>

<!-- QR Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<script>
const PASSWORD = "Jgthfnbdysq1913";
const networks = ["r2d5","r2d2"];
let selectedIndex = 0;

const wrap = document.getElementById("nwWrap");
const track = document.getElementById("nwTrack");

/* ==========================
   APPLY SELECTION
========================== */
function applySelection(){
  const width = wrap.clientWidth;
  track.style.transform = `translateX(${-selectedIndex * width}px)`;

  document.querySelectorAll(".net-card").forEach((c,i)=>{
    c.classList.toggle("active", i===selectedIndex);
  });

  document.querySelectorAll(".dot").forEach((d,i)=>{
    d.classList.toggle("active", i===selectedIndex);
  });

  document.getElementById("qrBox").style.display="none";

  const net = networks[selectedIndex];
  document.getElementById("helperText").textContent =
    net==="r2d5"
    ? "–í—ã–±—Ä–∞–Ω–∞ r2d5 (5 GHz) ‚Äî –æ–±—ã—á–Ω–æ –±—ã—Å—Ç—Ä–µ–µ, –µ—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 5 GHz."
    : "–í—ã–±—Ä–∞–Ω–∞ r2d2 (2.4 GHz) ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –∏ —Å—Ç–∞—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.";
}

/* ==========================
   LOOP SCROLL
========================== */
function selectIndex(i){
  if(i<0) i = networks.length-1;
  if(i>=networks.length) i = 0;
  selectedIndex = i;
  applySelection();
}

/* ==========================
   SWIPE
========================== */
let startX=null;

wrap.addEventListener("touchstart",e=>{
  startX = e.touches[0].clientX;
},{passive:true});

wrap.addEventListener("touchend",e=>{
  if(startX===null) return;
  const dx = e.changedTouches[0].clientX - startX;
  if(Math.abs(dx)>40){
    if(dx<0) selectIndex(selectedIndex+1);
    else selectIndex(selectedIndex-1);
  }
  startX=null;
});

/* ==========================
   WHEEL NAVIGATION (–ü–ö)
========================== */
wrap.addEventListener("wheel",e=>{
  if(e.deltaY>0) selectIndex(selectedIndex+1);
  else selectIndex(selectedIndex-1);
});

/* ==========================
   KEYBOARD ARROWS
========================== */
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowRight") selectIndex(selectedIndex+1);
  if(e.key==="ArrowLeft")  selectIndex(selectedIndex-1);
});

/* ==========================
   CLIENT QR GENERATION
========================== */
function showQR(){
  const net = networks[selectedIndex];
  const value = `WIFI:T:WPA;S:${net};P:${PASSWORD};;`;

  new QRious({
    element:document.getElementById("qrCanvas"),
    value:value,
    size:200,
    level:"H"
  });

  document.getElementById("qrBox").style.display="block";
}

/* ==========================
   ANDROID AUTOCONNECT
========================== */
function autoConnect(){
  const net = networks[selectedIndex];
  window.location.href = `WIFI:T:WPA;S:${net};P:${PASSWORD};;`;
}

/* ==========================
   COPY PASS
========================== */
function copyPass(){
  navigator.clipboard.writeText(PASSWORD)
    .then(()=>alert("–ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω"));
}

/* ==========================
   THEME
========================== */
function toggleTheme(){
  document.body.classList.toggle("neon");
  localStorage.theme = document.body.classList.contains("neon") ? "dark" : "system";
  updateThemeIcon();
}

function updateThemeIcon(){
  document.querySelector(".theme-toggle").textContent =
    document.body.classList.contains("neon") ? "üåô" : "‚òÄÔ∏è";
}

(function initTheme(){
  const stored = localStorage.theme;
  const prefersDark = matchMedia("(prefers-color-scheme:dark)").matches;

  if(stored==="dark") document.body.classList.add("neon");
  else if(stored==="system" && prefersDark) document.body.classList.add("neon");
  else if(!stored && prefersDark) document.body.classList.add("neon");

  updateThemeIcon();
})();

/* ==========================
   AUTOSELECT BEST NETWORK
========================== */
(function autoSelectBest(){
  const ua=navigator.userAgent;

  const oldAndroid=/Android\s([0-6]\.\d|7\.0)/i.test(ua);
  const oldIOS=/OS\s(9_|10_|11_)/i.test(ua);

  let prefer5 = !(oldAndroid||oldIOS);

  const conn = navigator.connection;
  if(conn){
    if(conn.downlink<10) prefer5=false;
    if(conn.rtt<30 && conn.downlink>30) prefer5=true;
  }

  selectIndex(prefer5 ? 0 : 1);
})();

window.addEventListener("load",()=>{
  applySelection();
  window.addEventListener("resize",applySelection);
});
</script>
</body>
</html>
