<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wi-Fi Connect</title>
<link rel="manifest" href="manifest.json">

<style>
:root{
  --accent:#9b75ff;
  --bg1:#1a0f35;
  --bg2:#080017;
  --card-bg:rgba(15,0,40,0.92);
  --text:#f3eaff;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background:radial-gradient(circle at top,var(--bg1),var(--bg2));
  min-height:100vh;
  color:var(--text);
  overflow-x:hidden;
}

/* контейнер */
.container{
  max-width:520px;
  margin:40px auto;
  padding:16px;
}

h1{
  text-align:center;
  font-size:26px;
  margin-bottom:26px;
}

/* карточка */
.card{
  background:var(--card-bg);
  border-radius:28px;
  padding:24px;
  box-shadow:0 20px 70px rgba(0,0,0,0.6);
  position:relative;
}

/* карусель */
.carousel{
  position:relative;
  height:360px;
  overflow:visible; /* ← стрелки работают */
  margin-bottom:16px;
}

.slide{
  position:absolute;
  top:0;left:0;right:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  opacity:0;
  transition:opacity .35s ease;
  z-index:5;
}

.slide.active{
  opacity:1;
  z-index:10;
}

.slide img{
  width:200px;
  margin-bottom:10px;
  filter:drop-shadow(0 0 22px rgba(160,130,255,0.4));
}

.slide label{
  font-size:22px;
  margin-top:4px;
}

.slide small{
  font-size:14px;
  opacity:.8;
  margin-top:4px;
}

/* стрелки */
.nav-arrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:52px;
  height:52px;
  background:rgba(0,0,0,0.55);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:20;
  backdrop-filter:blur(3px);
}

.nav-arrow.left{left:-26px;}
.nav-arrow.right{right:-26px;}

.nav-arrow img{
  width:22px;
  pointer-events:none;
}

/* точки */
.dots{
  text-align:center;
  margin-top:10px;
}

.dots span{
  width:10px;height:10px;
  display:inline-block;
  background:#5d4f94;
  border-radius:50%;
  margin:0 4px;
  transition:.2s;
}

.dots span.active{
  background:var(--accent);
  box-shadow:0 0 10px var(--accent);
}

/* кнопки */
button{
  width:100%;
  padding:15px;
  border:none;
  border-radius:18px;
  background:linear-gradient(135deg,#9b75ff,#b788ff);
  color:white;
  font-size:16px;
  margin-top:12px;
  cursor:pointer;
  box-shadow:0 10px 30px rgba(0,0,0,0.45);
}

button:hover{
  transform:translateY(-1px);
  filter:brightness(1.03);
}

/* QR блок */
.qr{
  display:none;
  margin-top:18px;
  text-align:center;
}

.qr svg{
  background:#fff;
  padding:10px;
  border-radius:14px;
}

/* пояснение */
.helper{
  margin-top:10px;
  text-align:center;
  font-size:13px;
  opacity:.85;
}

/* переключатель темы */
.theme-toggle{
  position:fixed;
  right:12px;
  top:12px;
  width:48px;height:48px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:50%;
  background:rgba(0,0,0,0.4);
  color:#ffcc88;
  font-size:24px;
  cursor:pointer;
  z-index:50;
}
</style>
</head>
<body>

<div class="theme-toggle" onclick="toggleTheme()">☀️</div>

<div class="container">
<h1>Подключение к Wi-Fi</h1>

<div class="card">

  <div class="carousel" id="carousel">
    <div class="slide active" data-net="r2d5">
      <img src="icons/icon_r2d5.svg">
      <label>r2d5</label>
      <small>5 GHz · быстрее, если поддерживается</small>
    </div>

    <div class="slide" data-net="r2d2">
      <img src="icons/icon_r2d2.svg">
      <label>r2d2</label>
      <small>2.4 GHz · стабильнее при расстоянии</small>
    </div>
  </div>

  <div class="nav-arrow left" onclick="prevSlide()">
    <img src="icons/arrow_left.svg">
  </div>

  <div class="nav-arrow right" onclick="nextSlide()">
    <img src="icons/arrow_right.svg">
  </div>

  <div class="dots" id="dots">
    <span class="active"></span>
    <span></span>
  </div>

  <button onclick="autoConnect()">Подключиться автоматически (Android)</button>
  <button onclick="showQR()">Показать QR-код</button>
  <button onclick="copyPass()">Скопировать пароль</button>

  <div class="qr" id="qrBox"></div>
  <div class="helper" id="helperText"></div>

</div>
</div>

<script>
const PASSWORD = "Jgthfnbdysq1913";

let slides = document.querySelectorAll(".slide");
let dots = document.querySelectorAll(".dots span");
let index = 0;

function updateSlide(){
  slides.forEach((s,i)=>s.classList.toggle("active", i === index));
  dots.forEach((d,i)=>d.classList.toggle("active", i === index));

  const net = slides[index].dataset.net;
  updateHelper(net);

  document.getElementById("qrBox").style.display = "none";
}

function prevSlide(){
  index = (index - 1 + slides.length) % slides.length;
  updateSlide();
}

function nextSlide(){
  index = (index + 1) % slides.length;
  updateSlide();
}

/* свайп */
let startX = 0;
document.getElementById("carousel").addEventListener("touchstart", e=>{
  startX = e.touches[0].clientX;
});
document.getElementById("carousel").addEventListener("touchend", e=>{
  let dx = e.changedTouches[0].clientX - startX;
  if(dx > 40) prevSlide();
  if(dx < -40) nextSlide();
});

/* helper */
function updateHelper(net){
  helperText.textContent =
    net === "r2d5"
    ? "Выбрана r2d5 (5 GHz) — быстрее на современных устройствах."
    : "Выбрана r2d2 (2.4 GHz) — стабильнее на расстоянии и старых устройствах.";
}

/* QR генерация */
function showQR(){
  const net = slides[index].dataset.net;

  let qr = `
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
      <rect width="256" height="256" fill="#fff"/>
      <text x="20" y="140" fill="#000" font-size="24">WIFI:S:${net};P:${PASSWORD}</text>
  </svg>`;

  document.getElementById("qrBox").innerHTML = qr;
  document.getElementById("qrBox").style.display = "block";
}

/* автоподключение */
function autoConnect(){
  const net = slides[index].dataset.net;
  const uri = `WIFI:T:WPA;S:${net};P:${PASSWORD};;`;
  location.href = uri;
}

/* копирование */
function copyPass(){
  navigator.clipboard.writeText(PASSWORD);
  alert("Пароль скопирован");
}

/* тема */
function toggleTheme(){
  document.body.classList.toggle("dark");
}

/* авто-выбор сети */
(function autoPick(){
  const ua = navigator.userAgent;
  const old = /Android [0-6]/i.test(ua) || /OS (9_|10_)/i.test(ua);

  index = old ? 1 : 0;
  updateSlide();
})();
</script>
</body>
</html>
